<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.9.1"/>
<title>C bindings for DepthSenseSDK: The C bindings for DepthSenseSDK Reference manual</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">C bindings for DepthSenseSDK
   &#160;<span id="projectnumber">0.1.0</span>
   </div>
   <div id="projectbrief">The C bindings for DepthSenseSDK</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.9.1 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li class="current"><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">The C bindings for DepthSenseSDK Reference manual </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h1><a class="anchor" id="overview"></a>
Overview</h1>
<p>The C bindings for DepthSenseSDK provides a high level API to use DepthSenseSDK cameras.</p>
<p>Note that the bindings are not thread safe and hence the thread safety should be handled by the caller.</p>
<h1><a class="anchor" id="initialization"></a>
Initializing the library</h1>
<p>The <a class="el" href="cdepthsense_8h.html#ab8cf0600f417fedec55363fc2688fb74" title="Initializes DepthSenseSDK in client/server mode. ">depthsense_initialize()</a> and <a class="el" href="cdepthsense_8h.html#ad231ee1e95f995d735b6283dc0a436d9" title="Initializes DepthSenseSDK in standalone mode. ">depthsense_initialize_standalone()</a> APIs allow to initialize the library. The former starts DepthSenseSDK in client server mode while the latter starts DepthSenseSDK in standalone mode. Client server mode allows multiple context to be run in parallel while the standalone mode guarantees that at most one context is running.</p>
<p>The <a class="el" href="cdepthsense_8h.html#ac4d5f96ecf8ac27c19f76ce1207b6585" title="Shutdown DepthSenseSDK. ">depthsense_shutdown()</a> API must be called to shutdown the library.</p>
<div class="fragment"><div class="line"><span class="keywordtype">int</span> main()</div>
<div class="line">{</div>
<div class="line">    depthsense_handle_t* handle = <a class="code" href="cdepthsense_8h.html#ab8cf0600f417fedec55363fc2688fb74">depthsense_initialize</a>();</div>
<div class="line">    <span class="keywordflow">if</span> ( handle != <span class="keyword">nullptr</span> )</div>
<div class="line">    {</div>
<div class="line">        <span class="comment">// ...</span></div>
<div class="line">        <a class="code" href="cdepthsense_8h.html#ac4d5f96ecf8ac27c19f76ce1207b6585">depthsense_shutdown</a>(handle);</div>
<div class="line">    }</div>
<div class="line">}</div>
</div><!-- fragment --><h1><a class="anchor" id="device_selection"></a>
Selecting a device</h1>
<p>The current bindings will automatically select the first depth interface. It is planned in a near future that the user can select any device. It should be noted that the device must be connected before the library is initialized.</p>
<h1><a class="anchor" id="device_configuration"></a>
Configuring the device</h1>
<p>The current bindings only provides APIs to enable or disable the auto configuration of the device, see <a class="el" href="cdepthsense_8h.html#a72386f5674729fe670913f936a7083eb" title="Disables the auto-configuration of the device. ">depthsense_disable_auto_configuration()</a> and <a class="el" href="cdepthsense_8h.html#a68f6d102928f3dcc8682603fe355e670" title="Enables the auto-configuration of the device. ">depthsense_enable_auto_configuration()</a>, and to set the expected payload size, see <a class="el" href="cdepthsense_8h.html#a828562d39901d65c8604efb33d2e4141" title="Set the DepthSense::DepthNode::RawPayloadSizePerFrame property to the desired payload size...">depthsense_set_raw_payload_size_per_frame()</a>.</p>
<div class="fragment"><div class="line"><span class="keywordtype">int</span> main()</div>
<div class="line">{</div>
<div class="line">    depthsense_handle_t* handle = <a class="code" href="cdepthsense_8h.html#ab8cf0600f417fedec55363fc2688fb74">depthsense_initialize</a>();</div>
<div class="line">    <span class="keywordflow">if</span> ( handle != <span class="keyword">nullptr</span> )</div>
<div class="line">    {</div>
<div class="line">        <a class="code" href="cdepthsense_8h.html#a3fb39fc2054a7ac94526bf59b8d8a860">depthsense_error_code</a> err = <a class="code" href="cdepthsense_8h.html#a72386f5674729fe670913f936a7083eb">depthsense_disable_auto_configuration</a>(handle);</div>
<div class="line">        <span class="keywordflow">if</span> ( err != <a class="code" href="cdepthsense_8h.html#a3fb39fc2054a7ac94526bf59b8d8a860a393f121a7efc9489798afd6057a6f6c0">depthsense_error_code_success</a> )</div>
<div class="line">        {</div>
<div class="line">            printf(<span class="stringliteral">&quot;Failed to disable auto configuration\n&quot;</span>);</div>
<div class="line">        }</div>
<div class="line"></div>
<div class="line">        err = <a class="code" href="cdepthsense_8h.html#a828562d39901d65c8604efb33d2e4141">depthsense_set_raw_payload_size_per_frame</a>(handle, 307200);</div>
<div class="line">        <span class="keywordflow">if</span> ( err != <a class="code" href="cdepthsense_8h.html#a3fb39fc2054a7ac94526bf59b8d8a860a393f121a7efc9489798afd6057a6f6c0">depthsense_error_code_success</a> )</div>
<div class="line">        {</div>
<div class="line">            printf(<span class="stringliteral">&quot;Failed to set payload size\n&quot;</span>);</div>
<div class="line">        }</div>
<div class="line"></div>
<div class="line">        <a class="code" href="cdepthsense_8h.html#ac4d5f96ecf8ac27c19f76ce1207b6585">depthsense_shutdown</a>(handle);</div>
<div class="line">    }</div>
<div class="line">}</div>
</div><!-- fragment --><h1><a class="anchor" id="streaming"></a>
Getting the stream</h1>
<p>Once the library has been initialized, the user can supply callbacks for different types of output, namely confidence, depth, vertices and raw data. The stream can be enabled by a call to <a class="el" href="cdepthsense_8h.html#aff840878daa314ac5130e129b91c74ba" title="Starts the stream. ">depthsense_start()</a> and stopped by a call to <a class="el" href="cdepthsense_8h.html#a3d562ba3eb68d5fe57b41ee46abf3c31" title="Stops the stream. ">depthsense_stop()</a>. The <a class="el" href="cdepthsense_8h.html#aff840878daa314ac5130e129b91c74ba" title="Starts the stream. ">depthsense_start()</a> function is a blocking function and will get unblocked when <a class="el" href="cdepthsense_8h.html#a3d562ba3eb68d5fe57b41ee46abf3c31" title="Stops the stream. ">depthsense_stop()</a> will be called. As soon as a new frame is available, the registered callbacks will be called successively, from the same thread and always in the same order.</p>
<p>The callbacks will receive the following data:</p><ul>
<li>A pointer to the data</li>
<li>The size in bytes if the buffer</li>
<li>The timestamp at which the frame was captured</li>
<li>The width and height of the frame if applicable</li>
</ul>
<p>The data held in the buffer is guaranteed to be valid only during the execution of the callback. In order to not miss frames, the time spent in the callback should be minimal.</p>
<p>In some conditions all the callbacks but the one for raw data might not be triggered even if the stream is active. This is the case when the user explicitely set the expected payload size, see <a class="el" href="cdepthsense_8h.html#a828562d39901d65c8604efb33d2e4141" title="Set the DepthSense::DepthNode::RawPayloadSizePerFrame property to the desired payload size...">depthsense_set_raw_payload_size_per_frame()</a>.</p>
<div class="fragment"><div class="line"><span class="comment">// The callback to be called whenever a depth frame is available.</span></div>
<div class="line"><span class="keywordtype">void</span> depth_callback(<span class="keyword">const</span> int16_t* data, int32_t size, int32_t width, int32_t height, uint64_t timestamp)</div>
<div class="line">{</div>
<div class="line">    printf(<span class="stringliteral">&quot;New depth frame received\n&quot;</span>);</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"><span class="keywordtype">int</span> main()</div>
<div class="line">{</div>
<div class="line">    depthsense_handle_t* handle = <a class="code" href="cdepthsense_8h.html#ab8cf0600f417fedec55363fc2688fb74">depthsense_initialize</a>();</div>
<div class="line">    <span class="keywordflow">if</span> ( handle != <span class="keyword">nullptr</span> )</div>
<div class="line">    {</div>
<div class="line">        <a class="code" href="cdepthsense_8h.html#a3fb39fc2054a7ac94526bf59b8d8a860">depthsense_error_code</a> err = <a class="code" href="cdepthsense_8h.html#a5f3fe4fe896e107ce3498a596bfebcdf">depthsense_enable_depth_stream</a>(handle, &amp;depth_callback);</div>
<div class="line">        <span class="keywordflow">if</span> ( err == <a class="code" href="cdepthsense_8h.html#a3fb39fc2054a7ac94526bf59b8d8a860a393f121a7efc9489798afd6057a6f6c0">depthsense_error_code_success</a> )</div>
<div class="line">        {</div>
<div class="line">            err = <a class="code" href="cdepthsense_8h.html#aff840878daa314ac5130e129b91c74ba">depthsense_start</a>(handle);</div>
<div class="line">            <span class="keywordflow">if</span> ( err != <a class="code" href="cdepthsense_8h.html#a3fb39fc2054a7ac94526bf59b8d8a860a393f121a7efc9489798afd6057a6f6c0">depthsense_error_code_success</a> )</div>
<div class="line">            {</div>
<div class="line">                printf(<span class="stringliteral">&quot;Failed to start stream\n&quot;</span>);</div>
<div class="line">            }</div>
<div class="line">        }</div>
<div class="line">        <span class="keywordflow">else</span></div>
<div class="line">        {</div>
<div class="line">            printf(<span class="stringliteral">&quot;Failed to enable the depth stream\n&quot;</span>);</div>
<div class="line">        }</div>
<div class="line"></div>
<div class="line">        <a class="code" href="cdepthsense_8h.html#ac4d5f96ecf8ac27c19f76ce1207b6585">depthsense_shutdown</a>(handle);</div>
<div class="line">    }</div>
<div class="line">}</div>
</div><!-- fragment --> </div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Fri Sep 18 2015 00:32:25 for C bindings for DepthSenseSDK by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.9.1
</small></address>
</body>
</html>
